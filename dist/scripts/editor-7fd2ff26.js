(()=>{"use strict";const e=window.wp.blocks,t=window.wp.components,i=window.wp.blockEditor,o=window.wp.element,r=window.wp.i18n,a=e=>{let{caption:t,setAttributes:o,uniqueId:a}=e;return React.createElement(i.RichText,{id:a,value:t,disableLineBreaks:!0,identifier:t,tagName:"figcaption",allowedFormats:["core/link","core/bold","core/code","core/italic","core/language","core/keyboard","core/subscript","core/text-color","core/superscript","core/strikethrough"],className:"wp-block-bigbite-image-comparison__caption",onChange:e=>o({caption:e}),placeholder:(0,r.__)("Please enter a caption","bigbite-image-comparison")})},n=e=>{let{overflow:i,setAttributes:o}=e;return React.createElement(t.ToggleControl,{checked:i,label:(0,r.__)("Overflow","bigbite-image-comparison"),onChange:e=>o({overflow:e}),help:(0,r.__)("Allow the divider to overflow the container","bigbite-image-comparison")})},l=e=>{let{dividerAxis:i,setAttributes:o}=e;return React.createElement(t.__experimentalToggleGroupControl,{isBlock:!0,value:i,label:(0,r.__)("Divider Axis","bigbite-image-comparison"),onChange:e=>o({dividerAxis:e}),help:(0,r.__)("The axis on which the divider will be oriented","bigbite-image-comparison")},React.createElement(t.__experimentalToggleGroupControlOption,{value:"vertical",label:(0,r.__)("Vertical","bigbite-image-comparison")}),React.createElement(t.__experimentalToggleGroupControlOption,{value:"horizontal",label:(0,r.__)("Horizontal","bigbite-image-comparison")}))},c=e=>{let{containerBoxHeight:i,containerBoxWidth:o,setAttributes:a}=e;const n=[{a11yLabel:(0,r.__)("Pixels (px)","bigbite-image-comparison"),label:"px",step:1,value:"px"}];return React.createElement(t.__experimentalGrid,{columns:2,gap:2},React.createElement(t.__experimentalUnitControl,{label:(0,r.__)("Width","bigbite-image-comparison"),onChange:e=>a({containerWidth:e}),value:o,units:n}),React.createElement(t.__experimentalUnitControl,{label:(0,r.__)("Height","bigbite-image-comparison"),onChange:e=>a({containerHeight:e}),value:i,units:n}))},s=e=>{let{dividerIconGap:i,setAttributes:o}=e;return React.createElement(t.RangeControl,{min:0,step:1,max:100,initialPosition:i,label:(0,r.__)("Icon Gap (px)","bigbite-image-comparison"),onChange:e=>o({dividerIconGap:e})})},d=e=>{let{dividerBoxWidth:i,setAttributes:o}=e;return React.createElement(t.RangeControl,{min:32,step:1,max:128,initialPosition:i,label:(0,r.__)("Box Width (px)","bigbite-image-comparison"),onChange:e=>o({dividerBoxWidth:e})})},m=e=>{let{dividerBoxHeight:i,setAttributes:o}=e;return React.createElement(t.RangeControl,{min:32,step:1,max:128,initialPosition:i,label:(0,r.__)("Box Height (px)","bigbite-image-comparison"),onChange:e=>o({dividerBoxHeight:e})})},u=e=>{let{dividerThickness:i,setAttributes:o}=e;return React.createElement(t.RangeControl,{min:0,max:64,step:1,initialPosition:i,label:(0,r.__)("Thickness (px)","bigbite-image-comparison"),onChange:e=>o({dividerThickness:e})})},g=e=>{let{dividerInitialPosition:i,setAttributes:o}=e;return React.createElement(t.RangeControl,{min:0,step:1,max:100,initialPosition:i,label:(0,r.__)("Divider Initial Position","bigbite-image-comparison"),onChange:e=>o({dividerInitialPosition:e})})},b=e=>{let{dividerBoxBorderRadius:i,setAttributes:o}=e;return React.createElement(t.RangeControl,{min:0,max:64,step:1,initialPosition:i?.top,label:(0,r.__)("Border Radius (px)","bigbite-image-comparison"),onChange:e=>o({dividerBoxBorderRadius:{top:e,right:e,bottom:e,left:e}})})},p=(0,i.withColors)({dividerColour:"divider-colour",dividerBoxColour:"divider-box-colour",dividerIconColour:"divider-icon-colour",captionTextColour:"caption-text-colour",captionBackgroundColour:"caption-background-colour"})((e=>{let{attributes:{overflow:o,dividerInitialPosition:a,dividerAxis:p,dividerThickness:v,customDividerColour:h,customDividerBoxColour:_,dividerBoxWidth:C,dividerBoxHeight:x,dividerBoxBorderRadius:R,customDividerIconColour:E,dividerIconGap:w,customCaptionTextColour:B,customCaptionBackgroundColour:k,containerHeight:I,containerWidth:f},shouldDisplayResize:A,setAttributes:T,clientId:z,dividerColour:P,setDividerColour:S,dividerBoxColour:D,setDividerBoxColour:y,dividerIconColour:H,setDividerIconColour:W,captionTextColour:U,setCaptionTextColour:G,captionBackgroundColour:$,setCaptionBackgroundColour:F}=e;const{colors:N,disableCustomColors:M}=(0,i.__experimentalUseMultipleOriginColorsAndGradients)(),O=[{label:(0,r.__)("Divider","bigbite-image-comparison"),colorValue:P?.color||h,onColorChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";S(e),T({customDividerColour:e})}},{label:(0,r.__)("Divider Box","bigbite-image-comparison"),colorValue:D?.color||_,onColorChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";y(e),T({customDividerBoxColour:e})}},{label:(0,r.__)("Divider Icon","bigbite-image-comparison"),colorValue:H?.color||E,onColorChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";W(e),T({customDividerIconColour:e})}}];return O?.push({label:(0,r.__)("Caption Text","bigbite-image-comparison"),colorValue:U?.color||B,onColorChange:e=>{G(e),T({customCaptionTextColour:e})}},{label:(0,r.__)("Caption Background","bigbite-image-comparison"),colorValue:$?.color||k,onColorChange:e=>{F(e),T({customCaptionBackgroundColour:e})}}),React.createElement(React.Fragment,null,React.createElement(i.InspectorControls,null,React.createElement(t.PanelBody,{title:(0,r.__)("Settings","bigbite-image-comparison")},React.createElement(n,{overflow:o,setAttributes:T}),A?React.createElement(c,{containerBoxHeight:I,containerBoxWidth:f,setAttributes:T}):null,React.createElement(g,{setAttributes:T,dividerInitialPosition:a}),React.createElement(l,{dividerAxis:p,setAttributes:T}))),React.createElement(i.InspectorControls,{group:"styles"},React.createElement(t.PanelBody,{title:(0,r.__)("Divider","bigbite-image-comparison")},React.createElement(u,{setAttributes:T,dividerThickness:v}),React.createElement(d,{setAttributes:T,dividerBoxWidth:C}),React.createElement(m,{setAttributes:T,dividerBoxHeight:x}),React.createElement(b,{setAttributes:T,dividerBoxBorderRadius:R}),React.createElement(s,{dividerIconGap:w,setAttributes:T}))),React.createElement(i.InspectorControls,{group:"color"},React.createElement(i.__experimentalColorGradientSettingsDropdown,{colors:N,panelId:z,settings:O,hasColorsOrGradients:!1,__experimentalIsRenderedInSidebar:!0,disableCustomColors:M}),React.createElement(i.ContrastChecker,{textColor:B,backgroundColor:k})))})),v=()=>React.createElement("div",{className:"wp-block-bigbite-image-comparison__divider"},React.createElement("button",{type:"button","aria-label":(0,r.__)("Divider Button","bigbite-image-comparison")},React.createElement("span",null),React.createElement("span",null))),h=e=>{let{children:t}=e;return React.createElement("div",{className:"wp-block-bigbite-image-comparison__container"},t,React.createElement(v,null))},_=JSON.parse('{"UU":"bigbite/image-comparison"}');(0,e.registerBlockType)(_.UU,{edit:e=>{let{attributes:r,setAttributes:n,clientId:l}=e;const[c]=(0,i.useSettings)("layout.contentSize"),{overflow:s,dividerInitialPosition:d,dividerAxis:m,dividerThickness:u,dividerColour:g,customDividerColour:b,dividerBoxColour:v,customDividerBoxColour:_,dividerBoxWidth:C,dividerBoxHeight:x,dividerBoxBorderRadius:R,dividerIconColour:E,customDividerIconColour:w,dividerIconGap:B,caption:k,captionTextColour:I,customCaptionTextColour:f,captionBackgroundColour:A,customCaptionBackgroundColour:T,containerHeight:z,containerWidth:P}=r,S={template:[["bigbite/image-comparison-item"],["bigbite/image-comparison-item"]],templateLock:"inserter",orientation:"horizontal"===m?"vertical":"horizontal"};let D=!1;(0,o.useEffect)((()=>{D||n({containerWidth:c})}),[c]);const[{innerBlocks:y}]=wp.data.select("core/block-editor").getBlocksByClientId(l);y.forEach((e=>{e?.attributes?.id&&(D=!0)}));const H={bottom:D,bottomLeft:!1,bottomRight:D,right:D,left:!1,top:!1,topLeft:!1,topRight:!1},W=(0,i.useBlockProps)({style:{"--bigbite-image-comparison-overflow":s?"visible":"hidden","--bigbite-image-comparison-divider-initial-position":d,"--bigbite-image-comparison-divider-thickness":u,"--bigbite-image-comparison-divider-box-width":C,"--bigbite-image-comparison-divider-box-height":x,"--bigbite-image-comparison-divider-box-border-radius":R?.top,"--bigbite-image-comparison-divider-icon-gap":B,"--bigbite-image-comparison-divider-colour":g?`var( --wp--preset--color--${g}, ${b} )`:b,"--bigbite-image-comparison-divider-box-colour":v?`var( --wp--preset--color--${v}, ${_} )`:_,"--bigbite-image-comparison-divider-icon-colour":E?`var( --wp--preset--color--${E}, ${w} )`:w,"--bigbite-image-comparison-caption-text-colour":I?`var( --wp--preset--color--${I}, ${f} )`:f,"--bigbite-image-comparison-caption-background-colour":A?`var( --wp--preset--color--${A}, ${T} )`:T,"--bigbite-image-comparison-container-height":z,"--bigbite-image-comparison-container-width":P},className:{"wp-block-bigbite-image-comparison--horizontal":"horizontal"===m}}),U=`fig-${l}`,{children:G,...$}=(0,i.useInnerBlocksProps)(W,S),F=(e,t)=>{const i=e.match(/(\d+)(.+)/);return i?`${parseInt(i[1],10)+t}${i[2]}`:e};return k&&($["aria-labelledby"]=U),React.createElement(React.Fragment,null,React.createElement(p,{attributes:r,shouldDisplayResize:D,setAttributes:n,clientId:l}),React.createElement("figure",$,React.createElement(t.ResizableBox,{showHandle:!0,enable:H,size:{height:z,width:P},minHeight:"150",minWidth:"150",onResizeStop:(e,t,i,o)=>(e=>{const t=F(z,e.height),i=F(P,e.width);n({containerHeight:t,containerWidth:i})})(o)},React.createElement(h,null,G)),React.createElement(a,{caption:k,setAttributes:n,uniqueId:U})))},save:()=>{const e=i.useInnerBlocksProps.save();return e?.children}});const C=window.wp.coreData,x=window.wp.data,R=e=>{let{alternativeText:a,id:n,sizeSlug:l,setAttributes:c}=e;const s=(0,x.useSelect)((e=>n&&e(C.store).getMedia(n,{context:"view"})),[n]),d=(0,o.useMemo)((()=>{if(!s)return null;let e="full";return l&&function(e,t){return"url"in(e?.sizes?.[t]??{})||"source_url"in(e?.media_details?.sizes?.[t]??{})}(s,l)&&(e=l),function(e,t){return e?.sizes?.[t]?.url||e?.media_details?.sizes?.[t]?.source_url||e?.url||e?.source_url}(s,e)}),[s,l]);return s?.id&&d?React.createElement("img",{src:d,alt:a}):React.createElement(i.MediaUploadCheck,null,React.createElement(i.MediaUpload,{value:{id:s?.id,src:d},allowedTypes:["image"],onSelect:e=>c({id:e.id}),render:e=>{let{open:i}=e;return React.createElement(t.Flex,{className:"wp-block-bigbite-image-comparison-item__uploader",direction:"column",justify:"center"},React.createElement(t.FlexItem,null,React.createElement(t.Button,{variant:"primary",onClick:i},(0,r.__)("Select Image","bigbite-image-comparison"))))}}))},E=e=>{let{id:i,alternativeText:o,setAttributes:a}=e;return React.createElement(t.TextareaControl,{disabled:!i,maxLength:150,value:o,label:(0,r.__)("Alternative Text","bigbite-image-comparison"),onChange:e=>a({alternativeText:e}),help:(0,r.__)("Please describe the image. If left blank, the image's original alternative text will be used, if available.","bigbite-image-comparison")})},w=[{label:(0,r._x)("Thumbnail","Image size option for resolution control","default"),value:"thumbnail"},{label:(0,r._x)("Medium","Image size option for resolution control","default"),value:"medium"},{label:(0,r._x)("Large","Image size option for resolution control","default"),value:"large"},{label:(0,r._x)("Full Size","Image size option for resolution control","default"),value:"full"}];function B(e){let{id:i,value:o,setAttributes:a,defaultValue:n=w[3].value}=e;const l=(0,x.useSelect)((e=>i?e(C.store).getMedia(i,{context:"view"}):null),[i]),c=o??n;return React.createElement(t.SelectControl,{label:(0,r.__)("Resolution","bigbite-image-comparison"),value:c,options:(()=>{if(!l)return!1;const{sizes:e}=l?.media_details??{};return Object.entries(e).map((e=>{let[t]=e;return{label:(i=t,i.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),value:t};var i}))})(),onChange:e=>(e=>{const t=l?.media_details?.sizes?.[e]?.source_url;return t?a({sizeSlug:e}):null})(e),help:(0,r.__)("Select the size of the source image.","bigbite-image-comparison")})}const k=e=>{let{attributes:o,setAttributes:a}=e;return React.createElement(React.Fragment,null,React.createElement(i.InspectorControls,null,React.createElement(t.PanelBody,{title:(0,r.__)("Settings","bigbite-image-comparison"),className:"wp-block-bigbite-image-comparison-item__settings"},React.createElement(t.PanelRow,null,React.createElement(R,{id:o?.id,sizeSlug:o?.sizeSlug,setAttributes:a,alternativeText:o?.alternativeText})),React.createElement(t.PanelRow,null,React.createElement(E,{id:o?.id,setAttributes:a,alternativeText:o?.alternativeText})),React.createElement(t.PanelRow,null,React.createElement(B,{value:o?.sizeSlug,setAttributes:a,id:o?.id})))),React.createElement(i.BlockControls,{group:"other"},React.createElement(i.MediaReplaceFlow,{accept:"image/*",mediaId:o?.id,allowedTypes:["image"],onSelect:e=>a({id:e?.id}),name:o?.id?(0,r.__)("Replace","bigbite-image-comparison"):(0,r.__)("Select Image","bigbite-image-comparison")})))},I=JSON.parse('{"UU":"bigbite/image-comparison-item"}');(0,e.registerBlockType)(I.UU,{edit:e=>{let{attributes:t,setAttributes:o}=e;return React.createElement(React.Fragment,null,React.createElement(k,{attributes:t,setAttributes:o}),React.createElement("div",(0,i.useBlockProps)(),React.createElement(R,{id:t.id,sizeSlug:t.sizeSlug,setAttributes:o})))},save:()=>null})})();
//# sourceMappingURL=editor-7fd2ff26.js.map